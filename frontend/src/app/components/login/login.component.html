<div class="login-container">
    <h1>Iniciar Sesión</h1>
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">

        <div class="form-group">
            <label for="email">Email</label>
            <input type="text" id="email" formControlName="email" class="form-control" [ngClass]="{ 
          'is-invalid': submitted && f['email'].errors,
          'shake-animation': submitted && f['email'].errors 
        }" />
            <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
                <div *ngIf="f['email'].errors['required']">Email es requerido</div>
            </div>
        </div>

        <div class="form-group">
            <label for="password">Contraseña</label>
            <div style="position: relative;">
                <input [type]="showPassword ? 'text' : 'password'" id="password" formControlName="password"
                    class="form-control" [ngClass]="{ 
            'is-invalid': submitted && f['password'].errors,
            'shake-animation': submitted && f['password'].errors
          }" style="padding-right: 4.5rem;" />
                <span (click)="togglePassword()"
                    style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; color: var(--color-gold); font-size: 0.9rem; font-weight: 600;">
                    {{ showPassword ? 'Ocultar' : 'Mostrar' }}
                </span>
            </div>
            <div *ngIf="submitted && f['password'].errors" class="invalid-feedback">
                <div *ngIf="f['password'].errors['required']">Contraseña es requerida</div>
            </div>
        </div>

        <div *ngIf="error" class="alert alert-danger" style="color: red; margin-bottom: 1rem; text-align: center;">{{
            error }}</div>

        <button [disabled]="loading" class="login-button">
            <div class="btn-content">
                <span *ngIf="loading" class="spinner"></span>
                <span *ngIf="!loading">Ingresar</span>
                <span *ngIf="loading">Verificando...</span>
            </div>
        </button>

        <div style="margin-top: 2rem; text-align: center;">
            <a routerLink="/registro" style="color: #145214; font-weight: 600;">¿No tienes cuenta? Regístrate aquí</a>
        </div>
    </form>
</div>